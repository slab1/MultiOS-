<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive API Explorer - MultiOS Documentation</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="../assets/css/interactive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <a href="../index.html">
                            <i class="fas fa-microchip"></i>
                            <h1>MultiOS API Documentation</h1>
                        </a>
                    </div>
                    <div class="header-actions">
                        <div class="search-container">
                            <i class="fas fa-search"></i>
                            <input type="text" id="global-search" placeholder="Search APIs, functions...">
                            <div id="search-results" class="search-results"></div>
                        </div>
                        <div class="theme-toggle">
                            <button id="theme-toggle" class="btn-icon">
                                <i class="fas fa-moon"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Breadcrumb -->
                <nav class="breadcrumb">
                    <div class="breadcrumb-item">
                        <a href="../index.html" class="breadcrumb-link">Home</a>
                    </div>
                    <div class="breadcrumb-item">
                        <span class="breadcrumb-current">Interactive API Explorer</span>
                    </div>
                </nav>

                <!-- Explorer Header -->
                <div class="explorer-header">
                    <h1>Interactive API Explorer</h1>
                    <p class="explorer-description">
                        Explore MultiOS APIs with live code examples, real-time testing, and immediate feedback.
                        Select any function to see its documentation, examples, and test it directly in your browser.
                    </p>
                </div>

                <!-- API Explorer Layout -->
                <div class="api-explorer-layout">
                    <!-- API Tree Sidebar -->
                    <div class="api-tree-sidebar">
                        <div class="tree-header">
                            <h3>API Reference</h3>
                            <div class="tree-controls">
                                <button class="btn-icon btn-sm" onclick="expandAll()">
                                    <i class="fas fa-expand-arrows-alt"></i>
                                </button>
                                <button class="btn-icon btn-sm" onclick="collapseAll()">
                                    <i class="fas fa-compress-arrows-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="api-tree" id="api-tree">
                            <!-- Kernel API Tree -->
                            <div class="tree-node" data-node="kernel">
                                <div class="tree-node-header" onclick="toggleNode(this)">
                                    <i class="fas fa-microchip tree-icon"></i>
                                    <span class="tree-label">Kernel API</span>
                                    <i class="fas fa-chevron-down tree-arrow"></i>
                                </div>
                                <div class="tree-children">
                                    <div class="tree-item" data-function="system_init" onclick="selectFunction('system_init')">
                                        <i class="fas fa-cog tree-icon"></i>
                                        <span class="tree-label">system_init()</span>
                                    </div>
                                    <div class="tree-item" data-function="get_system_info" onclick="selectFunction('get_system_info')">
                                        <i class="fas fa-info-circle tree-icon"></i>
                                        <span class="tree-label">get_system_info()</span>
                                    </div>
                                    <div class="tree-item" data-function="panic_handler" onclick="selectFunction('panic_handler')">
                                        <i class="fas fa-exclamation-triangle tree-icon"></i>
                                        <span class="tree-label">panic_handler()</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Memory API Tree -->
                            <div class="tree-node" data-node="memory">
                                <div class="tree-node-header" onclick="toggleNode(this)">
                                    <i class="fas fa-memory tree-icon"></i>
                                    <span class="tree-label">Memory Management</span>
                                    <i class="fas fa-chevron-down tree-arrow"></i>
                                </div>
                                <div class="tree-children">
                                    <div class="tree-item" data-function="allocate" onclick="selectFunction('allocate')">
                                        <i class="fas fa-plus tree-icon"></i>
                                        <span class="tree-label">allocate()</span>
                                    </div>
                                    <div class="tree-item" data-function="deallocate" onclick="selectFunction('deallocate')">
                                        <i class="fas fa-minus tree-icon"></i>
                                        <span class="tree-label">deallocate()</span>
                                    </div>
                                    <div class="tree-item" data-function="memory_map" onclick="selectFunction('memory_map')">
                                        <i class="fas fa-map tree-icon"></i>
                                        <span class="tree-label">memory_map()</span>
                                    </div>
                                    <div class="tree-item" data-function="virtual_memory_alloc" onclick="selectFunction('virtual_memory_alloc')">
                                        <i class="fas fa-layer-group tree-icon"></i>
                                        <span class="tree-label">virtual_memory_alloc()</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Process API Tree -->
                            <div class="tree-node" data-node="process">
                                <div class="tree-node-header" onclick="toggleNode(this)">
                                    <i class="fas fa-cogs tree-icon"></i>
                                    <span class="tree-label">Process Management</span>
                                    <i class="fas fa-chevron-down tree-arrow"></i>
                                </div>
                                <div class="tree-children">
                                    <div class="tree-item" data-function="create_process" onclick="selectFunction('create_process')">
                                        <i class="fas fa-plus-circle tree-icon"></i>
                                        <span class="tree-label">create_process()</span>
                                    </div>
                                    <div class="tree-item" data-function="kill_process" onclick="selectFunction('kill_process')">
                                        <i class="fas fa-stop-circle tree-icon"></i>
                                        <span class="tree-label">kill_process()</span>
                                    </div>
                                    <div class="tree-item" data-function="list_processes" onclick="selectFunction('list_processes')">
                                        <i class="fas fa-list tree-icon"></i>
                                        <span class="tree-label">list_processes()</span>
                                    </div>
                                    <div class="tree-item" data-function="process_sleep" onclick="selectFunction('process_sleep')">
                                        <i class="fas fa-moon tree-icon"></i>
                                        <span class="tree-label">process_sleep()</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Filesystem API Tree -->
                            <div class="tree-node" data-node="filesystem">
                                <div class="tree-node-header" onclick="toggleNode(this)">
                                    <i class="fas fa-folder tree-icon"></i>
                                    <span class="tree-label">Filesystem</span>
                                    <i class="fas fa-chevron-down tree-arrow"></i>
                                </div>
                                <div class="tree-children">
                                    <div class="tree-item" data-function="create_file" onclick="selectFunction('create_file')">
                                        <i class="fas fa-file-plus tree-icon"></i>
                                        <span class="tree-label">create_file()</span>
                                    </div>
                                    <div class="tree-item" data-function="delete_file" onclick="selectFunction('delete_file')">
                                        <i class="fas fa-file-minus tree-icon"></i>
                                        <span class="tree-label">delete_file()</span>
                                    </div>
                                    <div class="tree-item" data-function="read_file" onclick="selectFunction('read_file')">
                                        <i class="fas fa-file-download tree-icon"></i>
                                        <span class="tree-label">read_file()</span>
                                    </div>
                                    <div class="tree-item" data-function="write_file" onclick="selectFunction('write_file')">
                                        <i class="fas fa-file-upload tree-icon"></i>
                                        <span class="tree-label">write_file()</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Network API Tree -->
                            <div class="tree-node" data-node="network">
                                <div class="tree-node-header" onclick="toggleNode(this)">
                                    <i class="fas fa-network-wired tree-icon"></i>
                                    <span class="tree-label">Network</span>
                                    <i class="fas fa-chevron-down tree-arrow"></i>
                                </div>
                                <div class="tree-children">
                                    <div class="tree-item" data-function="create_socket" onclick="selectFunction('create_socket')">
                                        <i class="fas fa-plug tree-icon"></i>
                                        <span class="tree-label">create_socket()</span>
                                    </div>
                                    <div class="tree-item" data-function="bind_socket" onclick="selectFunction('bind_socket')">
                                        <i class="fas fa-link tree-icon"></i>
                                        <span class="tree-label">bind_socket()</span>
                                    </div>
                                    <div class="tree-item" data-function="send_data" onclick="selectFunction('send_data')">
                                        <i class="fas fa-paper-plane tree-icon"></i>
                                        <span class="tree-label">send_data()</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- API Details Panel -->
                    <div class="api-details-panel">
                        <!-- Function Selection Prompt -->
                        <div class="function-prompt" id="function-prompt">
                            <div class="prompt-icon">
                                <i class="fas fa-hand-pointer"></i>
                            </div>
                            <h3>Select an API Function</h3>
                            <p>Choose a function from the API tree on the left to view its documentation, examples, and test it interactively.</p>
                        </div>

                        <!-- Function Details -->
                        <div class="function-details" id="function-details" style="display: none;">
                            <!-- Function Header -->
                            <div class="function-header">
                                <div class="function-title-section">
                                    <h2 class="function-name" id="function-name"></h2>
                                    <div class="function-signature" id="function-signature"></div>
                                </div>
                                <div class="function-actions">
                                    <button class="btn btn-secondary btn-sm" onclick="copySignature()">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                    <button class="btn btn-primary btn-sm" onclick="runTest()">
                                        <i class="fas fa-play"></i> Test
                                    </button>
                                </div>
                            </div>

                            <!-- Function Metadata -->
                            <div class="function-meta" id="function-meta">
                                <!-- Meta items will be populated -->
                            </div>

                            <!-- Function Description -->
                            <div class="function-description">
                                <h3>Description</h3>
                                <div id="function-desc"></div>
                            </div>

                            <!-- Parameters -->
                            <div class="function-parameters">
                                <h3>Parameters</h3>
                                <div class="parameters-list" id="parameters-list">
                                    <!-- Parameters will be populated -->
                                </div>
                            </div>

                            <!-- Return Value -->
                            <div class="function-return">
                                <h3>Return Value</h3>
                                <div id="function-return"></div>
                            </div>

                            <!-- Examples -->
                            <div class="function-examples">
                                <h3>Examples</h3>
                                <div class="examples-tabs">
                                    <button class="tab-btn active" data-tab="basic">Basic Usage</button>
                                    <button class="tab-btn" data-tab="advanced">Advanced Usage</button>
                                    <button class="tab-btn" data-tab="error">Error Handling</button>
                                </div>
                                
                                <div class="tab-content active" id="basic-example">
                                    <pre><code class="language-rust" id="basic-code"></code></pre>
                                    <div class="example-actions">
                                        <button class="btn btn-secondary btn-sm" onclick="copyCode('basic-code')">
                                            <i class="fas fa-copy"></i> Copy Code
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="tab-content" id="advanced-example">
                                    <pre><code class="language-rust" id="advanced-code"></code></pre>
                                    <div class="example-actions">
                                        <button class="btn btn-secondary btn-sm" onclick="copyCode('advanced-code')">
                                            <i class="fas fa-copy"></i> Copy Code
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="tab-content" id="error-example">
                                    <pre><code class="language-rust" id="error-code"></code></pre>
                                    <div class="example-actions">
                                        <button class="btn btn-secondary btn-sm" onclick="copyCode('error-code')">
                                            <i class="fas fa-copy"></i> Copy Code
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Interactive Tester -->
                            <div class="function-tester">
                                <h3>Interactive Tester</h3>
                                <p>Test the function by providing parameters and running it in a simulated MultiOS environment.</p>
                                
                                <div class="tester-form" id="tester-form">
                                    <!-- Dynamic form will be generated -->
                                </div>
                                
                                <div class="tester-actions">
                                    <button class="btn btn-secondary btn-sm" onclick="resetTest()">
                                        <i class="fas fa-undo"></i> Reset
                                    </button>
                                    <button class="btn btn-primary btn-sm" onclick="executeTest()">
                                        <i class="fas fa-play"></i> Execute Test
                                    </button>
                                </div>
                                
                                <div class="test-result" id="test-result" style="display: none;">
                                    <div class="result-header">
                                        <i class="fas fa-terminal"></i>
                                        Test Results
                                    </div>
                                    <div class="result-content" id="test-output">
                                        <!-- Test output will be displayed here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/interactive.js"></script>

    <script>
        // API function definitions
        const apiFunctions = {
            system_init: {
                name: "system_init",
                signature: "fn system_init(config: &SystemConfig) -> Result<(), SystemError>",
                category: "kernel",
                difficulty: "beginner",
                description: "Initializes the MultiOS kernel with the provided system configuration. This function must be called before any other kernel operations.",
                parameters: [
                    {
                        name: "config",
                        type: "&SystemConfig",
                        description: "System configuration parameters including memory layout, hardware settings, and initialization options."
                    }
                ],
                returnValue: {
                    type: "Result<(), SystemError>",
                    description: "Ok(()) on success, or SystemError with details about the initialization failure."
                },
                examples: {
                    basic: `use multios_kernel::{system_init, SystemConfig};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let config = SystemConfig {
        memory_layout: MemoryLayout::Standard,
        hardware_config: HardwareConfig::default(),
        debug_mode: false,
    };
    
    system_init(&config)?;
    println!("MultiOS kernel initialized successfully");
    
    Ok(())
}`,
                    advanced: `use multios_kernel::{system_init, SystemConfig, SystemConfigBuilder};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let config = SystemConfigBuilder::new()
        .with_memory_layout(MemoryLayout::Large)
        .with_debug_mode(true)
        .with_hardware_config(custom_hardware_config())
        .build()?;
    
    system_init(&config)?;
    
    // Verify initialization
    assert!(kernel_is_initialized());
    
    Ok(())
}`,
                    error: `use multios_kernel::{system_init, SystemConfig, SystemError};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let config = SystemConfig {
        memory_layout: MemoryLayout::Standard,
        hardware_config: HardwareConfig { invalid_device: true },
        debug_mode: false,
    };
    
    match system_init(&config) {
        Ok(()) => println!("Initialization successful"),
        Err(SystemError::InvalidHardwareConfig) => {
            eprintln!("Hardware configuration is invalid");
            return Err("Invalid hardware config".into());
        }
        Err(SystemError::MemoryLayoutError(msg)) => {
            eprintln!("Memory layout error: {}", msg);
            return Err("Memory layout error".into());
        }
        Err(err) => {
            eprintln!("Unknown error: {:?}", err);
            return Err(format!("Initialization failed: {:?}", err).into());
        }
    }
}`
                }
            },
            allocate: {
                name: "allocate",
                signature: "fn allocate(size: usize, alignment: Option<Alignment>) -> Result<MemoryRegion, MemoryError>",
                category: "memory",
                difficulty: "beginner",
                description: "Allocates a contiguous memory region of the specified size with optional alignment constraints.",
                parameters: [
                    {
                        name: "size",
                        type: "usize",
                        description: "Number of bytes to allocate"
                    },
                    {
                        name: "alignment",
                        type: "Option<Alignment>",
                        description: "Memory alignment requirement (e.g., page alignment). None for default alignment."
                    }
                ],
                returnValue: {
                    type: "Result<MemoryRegion, MemoryError>",
                    description: "Ok(MemoryRegion) on success, or MemoryError with allocation failure details."
                },
                examples: {
                    basic: `use multios_memory::{allocate, MemoryRegion, Alignment};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    // Allocate 1024 bytes with default alignment
    let region = allocate(1024, None)?;
    
    // Write data to the allocated region
    let data = b"Hello, MultiOS!";
    region.write(0, data)?;
    
    println!("Allocated memory at: {:?}", region.base_address());
    println!("Data written: {}", String::from_utf8_lossy(&region.read(0, data.len())?));
    
    Ok(())
}`,
                    advanced: `use multios_memory::{allocate, MemoryRegion, Alignment, MemoryRegionFlags};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    // Allocate page-aligned memory for DMA
    let region = allocate(4096, Some(Alignment::PageAligned))?;
    
    // Configure region flags
    let flags = MemoryRegionFlags::WRITEABLE | MemoryRegionFlags::CACHEABLE;
    region.set_flags(flags)?;
    
    // Allocate multiple regions and verify they're non-overlapping
    let regions = (0..4).map(|_| {
        allocate(1024, Some(Alignment::CacheLineAligned))
    }).collect::<Result<Vec<_>, _>>()?;
    
    // Verify no overlap
    for (i, &r1) in regions.iter().enumerate() {
        for (j, &r2) in regions.iter().enumerate() {
            if i != j {
                assert!(!r1.overlaps(&r2)?);
            }
        }
    }
    
    println!("Allocated {} non-overlapping regions", regions.len());
    Ok(())
}`,
                    error: `use multios_memory::{allocate, MemoryError};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    // Try to allocate impossible amounts of memory
    let test_cases = [
        (usize::MAX, None),           // Maximum size
        (0, None),                    // Zero size
        (1024, Some(Alignment::PageAligned)) // Insufficient memory
    ];
    
    for (size, alignment) in test_cases {
        match allocate(size, alignment) {
            Ok(region) => println!("Allocated {} bytes", size),
            Err(MemoryError::InsufficientMemory) => {
                eprintln!("Insufficient memory for allocation of {} bytes", size);
            }
            Err(MemoryError::InvalidAlignment) => {
                eprintln!("Invalid alignment specified");
            }
            Err(MemoryError::OutOfMemory) => {
                eprintln!("System is out of memory");
            }
            Err(err) => {
                eprintln!("Unexpected error: {:?}", err);
            }
        }
    }
    
    Ok(())
}`
                }
            },
            create_process: {
                name: "create_process",
                signature: "fn create_process(params: ProcessCreateParams) -> Result<ProcessId, ProcessError>",
                category: "process",
                difficulty: "beginner",
                description: "Creates a new process with the specified parameters including command line, priority, and resource limits.",
                parameters: [
                    {
                        name: "params",
                        type: "ProcessCreateParams",
                        description: "Process creation parameters including name, command line, priority, and resource limits."
                    }
                ],
                returnValue: {
                    type: "Result<ProcessId, ProcessError>",
                    description: "Ok(ProcessId) with the new process ID, or ProcessError if creation fails."
                },
                examples: {
                    basic: `use multios_process::{create_process, ProcessCreateParams, ProcessPriority};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let params = ProcessCreateParams {
        name: "hello_multios".to_string(),
        command_line: vec!["hello_multios".to_string(), "--greeting=Hello".to_string()],
        priority: ProcessPriority::Normal,
        stack_size: 4096,
        heap_size: 1024,
        ..Default::default()
    };
    
    let process_id = create_process(params)?;
    println!("Created process: {:?}", process_id);
    
    Ok(())
}`,
                    advanced: `use multios_process::{create_process, ProcessCreateParams, ProcessPriority};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let params = ProcessCreateParams {
        name: "advanced_process".to_string(),
        command_line: vec!["advanced_process".to_string()],
        priority: ProcessPriority::High,
        stack_size: 8192,
        heap_size: 2048,
        environment: Some(vec![
            ("RUST_LOG".to_string(), "debug".to_string()),
            ("APP_CONFIG".to_string(), "/etc/app.conf".to_string())
        ].into_iter().collect()),
        working_directory: Some("/tmp/working_dir".to_string()),
        stdin_redirection: Some("/dev/null".to_string()),
        stdout_redirection: Some("/tmp/process.log".to_string()),
        resource_limits: ResourceLimits {
            max_memory_mb: Some(128),
            max_cpu_time_seconds: Some(60),
            max_file_descriptors: Some(64),
            ..Default::default()
        },
        ..Default::default()
    };
    
    let process_id = create_process(params)?;
    println!("Created advanced process: {:?}", process_id);
    
    // Monitor process creation
    let status = wait_for_process(process_id)?;
    println!("Process status: {:?}", status);
    
    Ok(())
}`,
                    error: `use multios_process::{create_process, ProcessCreateParams, ProcessError};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let invalid_params = ProcessCreateParams {
        name: "".to_string(),  // Empty name
        command_line: vec![],  // Empty command line
        priority: ProcessPriority::Normal,
        stack_size: 0,         // Invalid stack size
        heap_size: 1024,
        ..Default::default()
    };
    
    match create_process(invalid_params) {
        Ok(process_id) => println!("Process created: {:?}", process_id),
        Err(ProcessError::InvalidProcessName) => {
            eprintln!("Invalid process name");
        }
        Err(ProcessError::InvalidCommandLine) => {
            eprintln!("Invalid command line");
        }
        Err(ProcessError::ResourceLimitExceeded) => {
            eprintln!("Resource limit exceeded");
        }
        Err(ProcessError::SystemResourcesExhausted) => {
            eprintln!("System resources exhausted");
        }
        Err(err) => {
            eprintln!("Unexpected error: {:?}", err);
        }
    }
    
    Ok(())
}`
                }
            }
        };

        let currentFunction = null;

        function toggleNode(header) {
            const node = header.parentElement;
            const children = node.querySelector('.tree-children');
            const arrow = header.querySelector('.tree-arrow');
            
            if (children.style.display === 'none' || !children.style.display) {
                children.style.display = 'block';
                arrow.classList.remove('fa-chevron-right');
                arrow.classList.add('fa-chevron-down');
            } else {
                children.style.display = 'none';
                arrow.classList.remove('fa-chevron-down');
                arrow.classList.add('fa-chevron-right');
            }
        }

        function expandAll() {
            document.querySelectorAll('.tree-children').forEach(children => {
                children.style.display = 'block';
            });
            document.querySelectorAll('.tree-arrow').forEach(arrow => {
                arrow.classList.remove('fa-chevron-right');
                arrow.classList.add('fa-chevron-down');
            });
        }

        function collapseAll() {
            document.querySelectorAll('.tree-children').forEach(children => {
                children.style.display = 'none';
            });
            document.querySelectorAll('.tree-arrow').forEach(arrow => {
                arrow.classList.remove('fa-chevron-down');
                arrow.classList.add('fa-chevron-right');
            });
        }

        function selectFunction(functionName) {
            const func = apiFunctions[functionName];
            if (!func) return;
            
            currentFunction = func;
            
            // Update selected state
            document.querySelectorAll('.tree-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelector(`[data-function="${functionName}"]`).classList.add('selected');
            
            // Show function details
            showFunctionDetails(func);
        }

        function showFunctionDetails(func) {
            // Hide prompt and show details
            document.getElementById('function-prompt').style.display = 'none';
            document.getElementById('function-details').style.display = 'block';
            
            // Populate function information
            document.getElementById('function-name').textContent = func.name;
            document.getElementById('function-signature').textContent = func.signature;
            
            // Meta information
            const meta = document.getElementById('function-meta');
            meta.innerHTML = `
                <div class="meta-item">
                    <i class="fas fa-tag"></i>
                    <span class="meta-label">Category:</span>
                    <span class="meta-value">${func.category}</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-signal"></i>
                    <span class="meta-label">Difficulty:</span>
                    <span class="meta-value ${func.difficulty}">${func.difficulty}</span>
                </div>
            `;
            
            // Description
            document.getElementById('function-desc').textContent = func.description;
            
            // Parameters
            const paramsList = document.getElementById('parameters-list');
            paramsList.innerHTML = func.parameters.map(param => `
                <div class="parameter-item">
                    <div class="parameter-header">
                        <span class="parameter-name">${param.name}</span>
                        <span class="parameter-type">${param.type}</span>
                    </div>
                    <div class="parameter-description">${param.description}</div>
                </div>
            `).join('');
            
            // Return value
            document.getElementById('function-return').innerHTML = `
                <div class="return-type">${func.returnValue.type}</div>
                <div class="return-description">${func.returnValue.description}</div>
            `;
            
            // Examples
            document.getElementById('basic-code').textContent = func.examples.basic;
            document.getElementById('advanced-code').textContent = func.examples.advanced;
            document.getElementById('error-code').textContent = func.examples.error;
            
            // Highlight syntax
            Prism.highlightAll();
            
            // Generate tester form
            generateTesterForm(func);
        }

        function generateTesterForm(func) {
            const form = document.getElementById('tester-form');
            form.innerHTML = func.parameters.map(param => `
                <div class="form-group">
                    <label for="${param.name}">${param.name}</label>
                    <input type="text" id="${param.name}" name="${param.name}" 
                           placeholder="${param.description}" data-type="${param.type}">
                    <small class="form-help">${param.description}</small>
                </div>
            `).join('');
        }

        function runTest() {
            if (!currentFunction) return;
            
            // Scroll to tester section
            document.querySelector('.function-tester').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
            
            // Fill in example values
            if (currentFunction.name === 'system_init') {
                document.getElementById('config').value = 'Standard hardware configuration';
            } else if (currentFunction.name === 'allocate') {
                document.getElementById('size').value = '1024';
                document.getElementById('alignment').value = 'default';
            } else if (currentFunction.name === 'create_process') {
                document.getElementById('params').value = '{"name": "test_process"}';
            }
        }

        function executeTest() {
            if (!currentFunction) return;
            
            // Get form values
            const params = {};
            currentFunction.parameters.forEach(param => {
                const input = document.getElementById(param.name);
                params[param.name] = input.value;
            });
            
            // Show loading state
            const executeBtn = event.target;
            const originalText = executeBtn.innerHTML;
            executeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Executing...';
            executeBtn.disabled = true;
            
            // Simulate execution
            setTimeout(() => {
                const output = generateMockOutput(currentFunction, params);
                
                document.getElementById('test-result').style.display = 'block';
                document.getElementById('test-output').innerHTML = output;
                
                executeBtn.innerHTML = originalText;
                executeBtn.disabled = false;
            }, 2000);
        }

        function generateMockOutput(func, params) {
            switch (func.name) {
                case 'system_init':
                    return `
                        <div class="output-line">Compiling multios-kernel v1.0.0</div>
                        <div class="output-line">Initializing kernel subsystems...</div>
                        <div class="output-line">Memory manager: OK</div>
                        <div class="output-line">Process manager: OK</div>
                        <div class="output-line">Filesystem: OK</div>
                        <div class="output-line">Network stack: OK</div>
                        <div class="output-line success">✓ MultiOS kernel initialized successfully</div>
                    `;
                    
                case 'allocate':
                    return `
                        <div class="output-line">Allocating ${params.size || '1024'} bytes...</div>
                        <div class="output-line">Memory region created at: 0x7FFF0000</div>
                        <div class="output-line">Region size: ${params.size || '1024'} bytes</div>
                        <div class="output-line">Alignment: ${params.alignment || 'default'}</div>
                        <div class="output-line success">✓ Allocation successful</div>
                    `;
                    
                case 'create_process':
                    return `
                        <div class="output-line">Creating new process...</div>
                        <div class="output-line">Process ID: 1234</div>
                        <div class="output-line">Process name: test_process</div>
                        <div class="output-line">Priority: Normal</div>
                        <div class="output-line success">✓ Process created successfully</div>
                    `;
                    
                default:
                    return `
                        <div class="output-line">Executing ${func.name}...</div>
                        <div class="output-line success">✓ Function executed successfully</div>
                    `;
            }
        }

        function resetTest() {
            if (!currentFunction) return;
            
            const form = document.getElementById('tester-form');
            form.querySelectorAll('input').forEach(input => {
                input.value = '';
            });
            
            document.getElementById('test-result').style.display = 'none';
        }

        function copySignature() {
            if (!currentFunction) return;
            
            navigator.clipboard.writeText(currentFunction.signature).then(() => {
                // Show success feedback
                const btn = event.target;
                const original = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => btn.innerHTML = original, 2000);
            });
        }

        function copyCode(codeId) {
            const codeElement = document.getElementById(codeId);
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                // Show success feedback
                const btn = event.target;
                const original = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => btn.innerHTML = original, 2000);
            });
        }

        // Initialize tabs
        document.addEventListener('DOMContentLoaded', () => {
            // Tab functionality
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab;
                    
                    // Update active tab button
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Update active tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabId}-example`).classList.add('active');
                });
            });
            
            // Default to expanded first level
            expandAll();
        });
    </script>

    <style>
        .explorer-header {
            text-align: center;
            margin: var(--spacing-2xl) 0;
        }

        .explorer-header h1 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--spacing-lg);
        }

        .explorer-description {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }

        .api-explorer-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--spacing-xl);
            min-height: 600px;
        }

        .api-tree-sidebar {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
        }

        .tree-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg);
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .tree-header h3 {
            color: var(--text-primary);
            margin: 0;
        }

        .tree-controls {
            display: flex;
            gap: var(--spacing-xs);
        }

        .api-tree {
            padding: var(--spacing-lg);
        }

        .tree-node {
            margin-bottom: var(--spacing-md);
        }

        .tree-node-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            cursor: pointer;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }

        .tree-node-header:hover {
            background: var(--bg-secondary);
        }

        .tree-icon {
            color: var(--accent-primary);
            font-size: 0.875rem;
            width: 16px;
        }

        .tree-label {
            color: var(--text-primary);
            font-weight: 600;
            flex: 1;
        }

        .tree-arrow {
            color: var(--text-muted);
            transition: transform 0.2s ease;
        }

        .tree-children {
            margin-left: var(--spacing-lg);
            margin-top: var(--spacing-sm);
        }

        .tree-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 2px;
        }

        .tree-item:hover {
            background: var(--bg-secondary);
        }

        .tree-item.selected {
            background: var(--accent-primary);
            color: white;
        }

        .tree-item.selected .tree-icon {
            color: white;
        }

        .api-details-panel {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: var(--spacing-xl);
        }

        .function-prompt {
            text-align: center;
            padding: var(--spacing-2xl);
            color: var(--text-secondary);
        }

        .prompt-icon {
            font-size: 4rem;
            color: var(--text-muted);
            margin-bottom: var(--spacing-lg);
        }

        .function-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-xl);
        }

        .function-title-section {
            flex: 1;
        }

        .function-name {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .function-signature {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.875rem;
            color: var(--accent-primary);
            overflow-x: auto;
        }

        .function-actions {
            display: flex;
            gap: var(--spacing-sm);
        }

        .function-meta {
            display: flex;
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            padding: var(--spacing-lg);
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            color: var(--text-secondary);
        }

        .meta-label {
            font-weight: 600;
        }

        .meta-value {
            color: var(--text-primary);
        }

        .meta-value.beginner {
            background: var(--success);
            color: white;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 4px;
            font-size: 0.75rem;
        }

        .function-description,
        .function-parameters,
        .function-return,
        .function-examples,
        .function-tester {
            margin-bottom: var(--spacing-xl);
        }

        .function-description h3,
        .function-parameters h3,
        .function-return h3,
        .function-examples h3,
        .function-tester h3 {
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid var(--accent-primary);
        }

        .parameters-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .parameter-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: var(--spacing-lg);
        }

        .parameter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-sm);
        }

        .parameter-name {
            font-weight: 700;
            color: var(--text-primary);
        }

        .parameter-type {
            font-family: var(--font-mono);
            color: var(--accent-primary);
            font-size: 0.875rem;
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .parameter-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .return-type {
            font-family: var(--font-mono);
            color: var(--accent-primary);
            font-size: 1rem;
            margin-bottom: var(--spacing-sm);
        }

        .return-description {
            color: var(--text-secondary);
        }

        .examples-tabs {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
        }

        .tab-btn {
            padding: var(--spacing-sm) var(--spacing-lg);
            border: none;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .example-actions {
            margin-top: var(--spacing-sm);
            text-align: right;
        }

        .tester-form {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .form-group input {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .form-help {
            display: block;
            color: var(--text-muted);
            font-size: 0.75rem;
            margin-top: var(--spacing-xs);
        }

        .tester-actions {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: flex-end;
            margin-bottom: var(--spacing-lg);
        }

        .test-result {
            background: var(--bg-tertiary);
            border-radius: 8px;
            overflow: hidden;
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
            font-weight: 600;
        }

        .result-content {
            padding: var(--spacing-lg);
        }

        .output-line {
            font-family: var(--font-mono);
            font-size: 0.875rem;
            padding: var(--spacing-xs) 0;
            color: var(--text-secondary);
        }

        .output-line.success {
            color: var(--success);
            font-weight: 600;
        }

        @media (max-width: 1024px) {
            .api-explorer-layout {
                grid-template-columns: 1fr;
            }
            
            .api-tree-sidebar {
                order: 2;
            }
            
            .api-details-panel {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .explorer-header h1 {
                font-size: 2rem;
            }
            
            .function-header {
                flex-direction: column;
                gap: var(--spacing-lg);
            }
            
            .function-meta {
                flex-direction: column;
                gap: var(--spacing-md);
            }
            
            .examples-tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</body>
</html>