<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Examples - MultiOS API Documentation</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/interactive.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="../assets/images/logo.svg">
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <img src="../assets/images/logo.svg" alt="MultiOS" class="logo">
                <span class="brand-text">MultiOS API Documentation</span>
            </div>
            <div class="nav-links">
                <a href="../index.html" class="nav-link">Home</a>
                <a href="../api_reference/" class="nav-link">API Reference</a>
                <a href="../tutorials/" class="nav-link">Tutorials</a>
                <a href="../guides/" class="nav-link">Guides</a>
                <a href="../examples/" class="nav-link active">Examples</a>
                <a href="../interactive/api-explorer.html" class="nav-link">API Explorer</a>
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search examples..." class="search-input">
                <div id="search-results" class="search-results"></div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Code Examples</h1>
                <p class="page-description">
                    Practical code examples demonstrating MultiOS API usage across different difficulty levels 
                    and categories. Each example includes complete code, explanations, and expected outputs.
                </p>
            </div>

            <div class="difficulty-selector">
                <h2>Choose Difficulty Level</h2>
                <div class="difficulty-tabs">
                    <button class="difficulty-tab active" data-difficulty="beginner">
                        <span class="difficulty-icon">üå±</span>
                        <span>Beginner</span>
                        <small>Basic concepts and simple operations</small>
                    </button>
                    <button class="difficulty-tab" data-difficulty="intermediate">
                        <span class="difficulty-icon">‚ö°</span>
                        <span>Intermediate</span>
                        <small>Multi-step operations and integrations</small>
                    </button>
                    <button class="difficulty-tab" data-difficulty="advanced">
                        <span class="difficulty-icon">üöÄ</span>
                        <span>Advanced</span>
                        <small>Complex systems and optimizations</small>
                    </button>
                </div>
            </div>

            <div class="category-grid" id="category-grid">
                <!-- Categories will be populated by JavaScript -->
            </div>

            <div class="example-container" id="example-container">
                <!-- Examples will be loaded dynamically -->
            </div>

            <div class="example-filters">
                <h3>Filter Examples</h3>
                <div class="filter-controls">
                    <select id="category-filter" class="filter-select">
                        <option value="">All Categories</option>
                        <option value="kernel">Kernel</option>
                        <option value="memory">Memory</option>
                        <option value="process">Process</option>
                        <option value="filesystem">Filesystem</option>
                        <option value="networking">Networking</option>
                        <option value="gui">GUI</option>
                    </select>
                    <select id="difficulty-filter" class="filter-select">
                        <option value="">All Difficulties</option>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                    <input type="text" id="tag-filter" placeholder="Filter by tags..." class="filter-input">
                </div>
            </div>

            <div class="example-stats">
                <div class="stat-item">
                    <span class="stat-number" id="total-examples">0</span>
                    <span class="stat-label">Total Examples</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="beginner-examples">0</span>
                    <span class="stat-label">Beginner</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="intermediate-examples">0</span>
                    <span class="stat-label">Intermediate</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="advanced-examples">0</span>
                    <span class="stat-label">Advanced</span>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 MultiOS Project. All rights reserved.</p>
            <p>Built with ‚ù§Ô∏è for the MultiOS community</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/theme.js"></script>
    <script src="../assets/js/search.js"></script>
    <script src="../assets/js/interactive.js"></script>
    
    <script>
        // Example data structure
        const examplesData = {
            beginner: {
                kernel: [
                    {
                        id: 'basic-system-call',
                        title: 'Basic System Call',
                        description: 'Make your first system call to get system information',
                        tags: ['system-call', 'kernel', 'basics'],
                        code: `use multios::kernel::system;
use multios::types::SystemInfo;

fn main() -> Result<(), Box<dyn std::error::Error>> {
    // Get basic system information
    let info = system::get_system_info()?;
    
    println!("System: {}", info.name);
    println!("Version: {}", info.version);
    println!("Architecture: {}", info.architecture);
    println!("CPU Cores: {}", info.cpu_cores);
    
    Ok(())
}`,
                        explanation: 'This example demonstrates how to make a basic system call to retrieve information about the operating system. The `system::get_system_info()` function returns a `SystemInfo` structure containing basic system details.',
                        expectedOutput: `System: MultiOS
Version: 1.0.0
Architecture: x86_64
CPU Cores: 8`
                    }
                ],
                memory: [
                    {
                        id: 'simple-memory-alloc',
                        title: 'Simple Memory Allocation',
                        description: 'Allocate and deallocate memory using MultiOS memory API',
                        tags: ['memory', 'allocation', 'basics'],
                        code: `use multios::memory::{Allocator, MemoryManager};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let mut memory_manager = MemoryManager::new();
    
    // Allocate 1024 bytes
    let ptr = memory_manager.allocate(1024)?;
    println!("Allocated memory at address: {:?}", ptr);
    
    // Write data to allocated memory
    unsafe {
        std::ptr::write(ptr as *mut u8, 42);
        let value = std::ptr::read(ptr as *const u8);
        println!("Written and read value: {}", value);
    }
    
    // Deallocate memory
    memory_manager.deallocate(ptr, 1024)?;
    println!("Memory deallocated successfully");
    
    Ok(())
}`,
                        explanation: 'This example shows how to use MultiOS memory management APIs to allocate and deallocate memory safely. The `MemoryManager` provides a safe interface to the underlying memory allocation system.',
                        expectedOutput: `Allocated memory at address: 0x7f8c4000
Written and read value: 42
Memory deallocated successfully`
                    }
                ],
                process: [
                    {
                        id: 'create-child-process',
                        title: 'Create Child Process',
                        description: 'Spawn a new process and interact with it',
                        tags: ['process', 'spawn', 'interprocess'],
                        code: `use multios::process::{ProcessManager, Process};
use multios::types::ProcessConfig;

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let process_manager = ProcessManager::new();
    
    // Configure the new process
    let config = ProcessConfig::builder()
        .name("hello_process")
        .program("/bin/echo")
        .args(&["Hello from child process!"])
        .build();
    
    // Spawn the process
    let mut child = process_manager.spawn(config)?;
    
    // Wait for completion
    let exit_code = child.wait()?;
    println!("Child process exited with code: {}", exit_code);
    
    Ok(())
}`,
                        explanation: 'This example demonstrates how to create and manage child processes using MultiOS APIs. The `ProcessManager` provides methods to spawn, control, and monitor processes.',
                        expectedOutput: `Hello from child process!
Child process exited with code: 0`
                    }
                ],
                filesystem: [
                    {
                        id: 'read-text-file',
                        title: 'Read Text File',
                        description: 'Read contents from a text file',
                        tags: ['filesystem', 'file', 'io'],
                        code: `use multios::filesystem::{FileSystem, File, OpenMode};
use std::path::Path;

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let fs = FileSystem::new();
    let file_path = Path::new("/tmp/example.txt");
    
    // Open file for reading
    let mut file = fs.open_file(file_path, OpenMode::Read)?;
    
    // Read file contents
    let contents = file.read_to_string()?;
    println!("File contents: {}", contents);
    
    file.close()?;
    Ok(())
}`,
                        explanation: 'This example shows how to read from a file using the MultiOS filesystem API. The `FileSystem` provides a consistent interface for file operations across different backends.',
                        expectedOutput: `File contents: Hello, World!`
                    }
                ],
                networking: [
                    {
                        id: 'simple-http-request',
                        title: 'Simple HTTP Request',
                        description: 'Make a basic HTTP GET request',
                        tags: ['networking', 'http', 'client'],
                        code: `use multios::networking::{HttpClient, RequestBuilder};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let client = HttpClient::new();
    
    // Create and send HTTP GET request
    let response = client.get("https://httpbin.org/get")
        .header("User-Agent", "MultiOS/1.0")
        .send()?;
    
    println!("Status: {}", response.status());
    println!("Headers: {:#?}", response.headers());
    println!("Body: {}", response.text()?);
    
    Ok(())
}`,
                        explanation: 'This example demonstrates making a simple HTTP request using MultiOS networking APIs. The `HttpClient` provides a high-level interface for making network requests.',
                        expectedOutput: `Status: 200 OK
Headers: {...}
Body: {"url": "https://httpbin.org/get", ...}`
                    }
                ],
                gui: [
                    {
                        id: 'create-window',
                        title: 'Create Window',
                        description: 'Create a basic GUI window',
                        tags: ['gui', 'window', 'basics'],
                        code: `use multios::gui::{Window, WindowBuilder, EventLoop};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    // Create event loop
    let event_loop = EventLoop::new();
    
    // Build a simple window
    let window = WindowBuilder::new()
        .title("My First MultiOS Window")
        .size(800, 600)
        .build(&event_loop)?;
    
    // Main event loop
    event_loop.run(|event| {
        match event {
            gui::Event::Close => gui::Event::Exit,
            gui::Event::Draw => {
                // Draw basic content
                window.clear(gui::Color::from_rgb(255, 255, 255));
                window.draw_text("Hello, MultiOS GUI!", 50, 50);
                gui::Event::Continue
            },
            _ => gui::Event::Continue
        }
    })?;
    
    Ok(())
}`,
                        explanation: 'This example creates a basic GUI window using MultiOS GUI APIs. The `WindowBuilder` provides a fluent interface for window configuration.',
                        expectedOutput: `Window appears with "My First MultiOS Window" title and "Hello, MultiOS GUI!" text`
                    }
                ]
            },
            intermediate: {
                memory: [
                    {
                        id: 'memory-pool-implementation',
                        title: 'Memory Pool Implementation',
                        description: 'Create and manage a pool of pre-allocated memory blocks',
                        tags: ['memory', 'pool', 'performance'],
                        code: `use multios::memory::{MemoryPool, PoolAllocator};
use std::collections::HashMap;

struct ObjectPool {
    pool: MemoryPool,
    available: Vec<*mut u8>,
    in_use: HashMap<usize, *mut u8>,
}

impl ObjectPool {
    fn new(pool_size: usize, object_size: usize) -> Self {
        let pool = MemoryPool::new(pool_size * object_size).unwrap();
        let mut available = Vec::new();
        
        for i in 0..pool_size {
            let ptr = unsafe { pool.allocate(object_size).unwrap() };
            available.push(ptr);
        }
        
        ObjectPool {
            pool,
            available,
            in_use: HashMap::new(),
        }
    }
    
    fn acquire(&mut self, object_size: usize) -> Option<*mut u8> {
        if let Some(ptr) = self.available.pop() {
            let id = ptr as usize;
            self.in_use.insert(id, ptr);
            Some(ptr)
        } else {
            None
        }
    }
    
    fn release(&mut self, ptr: *mut u8) {
        if self.in_use.remove(&(ptr as usize)).is_some() {
            self.available.push(ptr);
        }
    }
}`,
                        explanation: 'Memory pools improve performance by pre-allocating memory blocks and reusing them, reducing allocation overhead.',
                        expectedOutput: `Pool created with 100 blocks\nAcquired memory blocks at 0x7f8c4000 and 0x7f8c4400\nReturned memory blocks to pool`
                    },
                    {
                        id: 'shared-memory-locking',
                        title: 'Shared Memory with Locking',
                        description: 'Implement thread-safe shared memory regions using MultiOS synchronization',
                        tags: ['memory', 'sync', 'threading'],
                        code: `use multios::memory::{SharedMemory, MemoryRegion};
use multios::sync::{Mutex, RwLock};
use std::sync::Arc;

struct SharedData {
    counter: u64,
    data: Vec<u8>,
}

struct SharedMemoryManager {
    memory: Arc<Mutex<SharedMemory>>,
    data: Arc<RwLock<SharedData>>,
}

impl SharedMemoryManager {
    fn new(size: usize) -> Result<Self, Box<dyn std::error::Error>> {
        let memory = SharedMemory::create(size)?;
        let data = Arc::new(RwLock::new(SharedData::new(size)));
        
        Ok(SharedMemoryManager {
            memory: Arc::new(Mutex::new(memory)),
            data,
        })
    }
    
    fn increment_counter(&self) -> Result<u64, Box<dyn std::error::Error>> {
        let mut data = self.data.write()?;
        data.counter += 1;
        Ok(data.counter)
    }
}`,
                        explanation: 'Shared memory with locking provides thread-safe concurrent access to shared data structures.',
                        expectedOutput: `Counter: 1\nCounter: 2\nCounter: 3`
                    }
                ],
                process: [
                    {
                        id: 'interprocess-communication',
                        title: 'Inter-Process Communication',
                        description: 'Communication between processes using pipes and shared memory',
                        tags: ['process', 'ipc', 'communication'],
                        code: `use multios::process::{ProcessManager, IPCChannel};

fn create_ipc_example() -> Result<(), Box<dyn std::error::Error>> {
    let process_manager = ProcessManager::new();
    
    // Create IPC channel
    let channel = IPCChannel::new(1024)?;
    
    // Spawn child process
    let child_config = ProcessConfig::builder()
        .name("child_process")
        .program("/path/to/child")
        .build();
    
    let mut child = process_manager.spawn(child_config)?;
    
    // Send message to child
    let message = "Hello from parent!";
    channel.send(message.as_bytes())?;
    
    // Receive response
    let response = channel.recv()?;
    let response_str = String::from_utf8_lossy(&response);
    
    println!("Received from child: {}", response_str);
    
    Ok(())
}`,
                        explanation: 'IPC allows processes to communicate efficiently using channels, pipes, or shared memory.',
                        expectedOutput: `Received from child: Hello from parent!`
                    }
                ],
                networking: [
                    {
                        id: 'tcp-server-client',
                        title: 'TCP Server and Client',
                        description: 'Create a simple TCP server and client communication',
                        tags: ['networking', 'tcp', 'server-client'],
                        code: `use multios::networking::{TcpServer, TcpClient};

fn create_tcp_server() -> Result<(), Box<dyn std::error::Error>> {
    let mut server = TcpServer::bind("127.0.0.1:8080")?;
    
    println!("Server listening on port 8080");
    
    loop {
        let (mut socket, address) = server.accept()?;
        println!("Connection from: {}", address);
        
        std::thread::spawn(move || {
            let mut buffer = [0; 1024];
            if let Ok(bytes_read) = socket.read(&mut buffer) {
                let message = String::from_utf8_lossy(&buffer[..bytes_read]);
                println!("Received: {}", message);
                
                let response = format!("Echo: {}", message);
                let _ = socket.write_all(response.as_bytes());
            }
        });
    }
}`,
                        explanation: 'TCP servers listen for incoming connections and handle them concurrently using threads or async operations.',
                        expectedOutput: `Server listening on port 8080\nConnection from: 127.0.0.1:12345\nReceived: Hello Server!\nEcho: Hello Server!`
                    }
                ]
            },
            advanced: {
                kernel: [
                    {
                        id: 'kernel-module-loading',
                        title: 'Dynamic Kernel Module Loading',
                        description: 'Load and unload kernel modules dynamically',
                        tags: ['kernel', 'modules', 'advanced'],
                        code: `use multios::kernel::module::ModuleManager;
use multios::types::ModuleInfo;

fn manage_kernel_modules() -> Result<(), Box<dyn std::error::Error>> {
    let module_manager = ModuleManager::new();
    
    // Load a kernel module
    let module_path = "/lib/modules/custom_driver.ko";
    let module_info = module_manager.load_module(module_path, &["param1=value1"])?;
    
    println!("Loaded module: {} (version: {})", 
             module_info.name, module_info.version);
    
    // Get module parameters
    let params = module_manager.get_module_parameters(&module_info.id)?;
    println!("Module parameters: {:?}", params);
    
    // Unload module
    module_manager.unload_module(&module_info.id)?;
    println!("Module unloaded successfully");
    
    Ok(())
}`,
                        explanation: 'Kernel modules can be loaded and unloaded dynamically to extend kernel functionality without rebooting.',
                        expectedOutput: `Loaded module: custom_driver (version: 1.0)\nModule parameters: {"param1": "value1"}\nModule unloaded successfully`
                    }
                ],
                memory: [
                    {
                        id: 'custom-allocator-debugging',
                        title: 'Custom Allocator with Debugging',
                        description: 'Implement a memory allocator with detailed tracking and debugging features',
                        tags: ['memory', 'allocator', 'debugging'],
                        code: `use multios::memory::{Allocator, MemoryManager};
use std::collections::HashMap;
use std::sync::Mutex;

struct DebugAllocator {
    inner: MemoryManager,
    allocations: Mutex<HashMap<*mut u8, AllocationInfo>>,
    total_allocated: Mutex<usize>,
}

#[derive(Debug, Clone)]
struct AllocationInfo {
    size: usize,
    file: &'static str,
    line: u32,
}

impl DebugAllocator {
    fn allocate_with_debug(&self, size: usize, file: &'static str, line: u32) -> Result<*mut u8, Box<dyn std::error::Error>> {
        let ptr = self.inner.allocate(size)?;
        
        let info = AllocationInfo { size, file, line };
        let mut allocations = self.allocations.lock().unwrap();
        let mut total = self.total_allocated.lock().unwrap();
        
        allocations.insert(ptr, info);
        *total += size;
        
        println!("ALLOC: {:?} ({} bytes) at {}:{}", ptr, size, file, line);
        
        Ok(ptr)
    }
}`,
                        explanation: 'Custom allocators with debugging help track memory usage and identify memory leaks in complex applications.',
                        expectedOutput: `ALLOC: 0x7f8c4000 (1024 bytes) at main.rs:45\nDEALLOC: 0x7f8c4000 (1024 bytes) at main.rs:52`
                    },
                    {
                        id: 'memory-mapped-io',
                        title: 'Memory-Mapped File I/O',
                        description: 'Efficiently read and write large files using memory mapping',
                        tags: ['memory', 'file-io', 'performance'],
                        code: `use multios::memory::MemoryMappedFile;
use multios::filesystem::{FileSystem, OpenMode};
use std::path::Path;

fn process_large_file<P: AsRef<Path>>(path: P) -> Result<(), Box<dyn std::error::Error>> {
    let fs = FileSystem::new();
    
    // Memory-map the file
    let mmap = unsafe { MemoryMappedFile::map(path.as_ref(), OpenMode::ReadWrite)? };
    
    // Process the mapped memory
    let content = mmap.as_slice();
    let lines: Vec<&str> = content.lines().collect();
    
    println!("Total lines in file: {}", lines.len());
    
    // Modify some lines in memory
    let mut mmap_mut = mmap.make_mutable()?;
    let first_line = b"Modified Line 0: Hello, MultiOS!\n";
    if first_line.len() <= 100 {
        mmap_mut[..first_line.len()].copy_from_slice(first_line);
    }
    
    mmap_mut.sync()?;
    Ok(())
}`,
                        explanation: 'Memory-mapped files allow efficient processing of large files by mapping them into memory address space.',
                        expectedOutput: `Total lines in file: 1000000\nFile modified successfully`
                    }
                ]
            }
        };

        // Initialize examples page
        document.addEventListener('DOMContentLoaded', function() {
            initializeExamples();
            setupEventListeners();
            updateStats();
        });

        function initializeExamples() {
            loadCategoryGrid();
            loadExamples('beginner');
        }

        function loadCategoryGrid() {
            const categoryGrid = document.getElementById('category-grid');
            const categories = ['kernel', 'memory', 'process', 'filesystem', 'networking', 'gui'];
            
            categoryGrid.innerHTML = categories.map(category => `
                <div class="category-card" data-category="${category}">
                    <div class="category-icon">${getCategoryIcon(category)}</div>
                    <h3 class="category-title">${category.charAt(0).toUpperCase() + category.slice(1)}</h3>
                    <p class="category-description">${getCategoryDescription(category)}</p>
                    <div class="category-stats">
                        <span class="stat">Beginner: <span id="beginner-${category}">0</span></span>
                        <span class="stat">Intermediate: <span id="intermediate-${category}">0</span></span>
                        <span class="stat">Advanced: <span id="advanced-${category}">0</span></span>
                    </div>
                </div>
            `).join('');
        }

        function getCategoryIcon(category) {
            const icons = {
                kernel: '‚öôÔ∏è',
                memory: 'üß†',
                process: '‚ö°',
                filesystem: 'üìÅ',
                networking: 'üåê',
                gui: 'üñºÔ∏è'
            };
            return icons[category] || 'üìù';
        }

        function getCategoryDescription(category) {
            const descriptions = {
                kernel: 'System-level operations and low-level APIs',
                memory: 'Memory management and allocation patterns',
                process: 'Process creation, management, and IPC',
                filesystem: 'File and directory operations',
                networking: 'Network communication and protocols',
                gui: 'Graphical user interface development'
            };
            return descriptions[category] || 'General examples';
        }

        function loadExamples(difficulty) {
            const exampleContainer = document.getElementById('example-container');
            const categories = ['kernel', 'memory', 'process', 'filesystem', 'networking', 'gui'];
            
            if (!examplesData[difficulty]) {
                exampleContainer.innerHTML = '<p>No examples available for this difficulty level yet.</p>';
                return;
            }

            let examplesHtml = '';
            
            categories.forEach(category => {
                const categoryExamples = examplesData[difficulty][category] || [];
                
                if (categoryExamples.length > 0) {
                    examplesHtml += `
                        <div class="category-section">
                            <h2 class="category-header">
                                <span class="category-icon">${getCategoryIcon(category)}</span>
                                ${category.charAt(0).toUpperCase() + category.slice(1)}
                                <span class="example-count">${categoryExamples.length} examples</span>
                            </h2>
                            <div class="examples-grid">
                                ${categoryExamples.map(example => createExampleCard(example, category)).join('')}
                            </div>
                        </div>
                    `;
                }
            });

            exampleContainer.innerHTML = examplesHtml || '<p>No examples available for this difficulty level yet.</p>';
        }

        function createExampleCard(example, category) {
            return `
                <div class="example-card" data-example-id="${example.id}">
                    <div class="example-header">
                        <h3 class="example-title">${example.title}</h3>
                        <div class="example-tags">
                            ${example.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                    <p class="example-description">${example.description}</p>
                    <div class="example-actions">
                        <button class="btn btn-primary" onclick="showExample('${example.id}')">View Code</button>
                        <button class="btn btn-secondary" onclick="copyCode('${example.id}')">Copy</button>
                    </div>
                </div>
            `;
        }

        function showExample(exampleId) {
            // Find the example in all difficulty levels and categories
            for (const difficulty in examplesData) {
                for (const category in examplesData[difficulty]) {
                    const example = examplesData[difficulty][category].find(ex => ex.id === exampleId);
                    if (example) {
                        displayExampleModal(example, difficulty, category);
                        return;
                    }
                }
            }
        }

        function displayExampleModal(example, difficulty, category) {
            const modal = createExampleModal(example, difficulty, category);
            document.body.appendChild(modal);
            modal.classList.add('show');
        }

        function createExampleModal(example, difficulty, category) {
            const modal = document.createElement('div');
            modal.className = 'example-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>${example.title}</h2>
                        <button class="modal-close" onclick="closeModal(this)">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="example-meta">
                            <span class="difficulty-badge ${difficulty}">${difficulty}</span>
                            <span class="category-badge">${category}</span>
                            ${example.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                        <p class="example-description-full">${example.description}</p>
                        
                        <div class="code-section">
                            <h3>Code</h3>
                            <pre><code class="language-rust">${escapeHtml(example.code)}</code></pre>
                        </div>
                        
                        <div class="explanation-section">
                            <h3>Explanation</h3>
                            <p>${example.explanation}</p>
                        </div>
                        
                        <div class="output-section">
                            <h3>Expected Output</h3>
                            <pre><code class="language-text">${escapeHtml(example.expectedOutput)}</code></pre>
                        </div>
                        
                        <div class="modal-actions">
                            <button class="btn btn-primary" onclick="runExample('${example.id}')">Run Example</button>
                            <button class="btn btn-secondary" onclick="copyCode('${example.id}')">Copy Code</button>
                        </div>
                    </div>
                </div>
            `;
            return modal;
        }

        function closeModal(button) {
            const modal = button.closest('.example-modal');
            modal.classList.remove('show');
            setTimeout(() => modal.remove(), 300);
        }

        function copyCode(exampleId) {
            // Find the example and copy its code
            for (const difficulty in examplesData) {
                for (const category in examplesData[difficulty]) {
                    const example = examplesData[difficulty][category].find(ex => ex.id === exampleId);
                    if (example) {
                        navigator.clipboard.writeText(example.code).then(() => {
                            showNotification('Code copied to clipboard!');
                        });
                        return;
                    }
                }
            }
        }

        function runExample(exampleId) {
            // Simulate running an example
            showNotification('Example execution started...');
            
            setTimeout(() => {
                // Find and display the expected output
                for (const difficulty in examplesData) {
                    for (const category in examplesData[difficulty]) {
                        const example = examplesData[difficulty][category].find(ex => ex.id === exampleId);
                        if (example) {
                            const outputWindow = window.open('', '_blank', 'width=600,height=400');
                            outputWindow.document.write(`
                                <html>
                                    <head><title>Example Output - ${example.title}</title></head>
                                    <body style="font-family: monospace; padding: 20px;">
                                        <h2>Output:</h2>
                                        <pre>${escapeHtml(example.expectedOutput)}</pre>
                                    </body>
                                </html>
                            `);
                            return;
                        }
                    }
                }
            }, 1000);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function setupEventListeners() {
            // Difficulty tabs
            document.querySelectorAll('.difficulty-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.difficulty-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    loadExamples(this.dataset.difficulty);
                });
            });

            // Category filter
            document.getElementById('category-filter').addEventListener('change', filterExamples);
            document.getElementById('difficulty-filter').addEventListener('change', filterExamples);
            document.getElementById('tag-filter').addEventListener('input', filterExamples);

            // Category cards click
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', function() {
                    const category = this.dataset.category;
                    const activeDifficulty = document.querySelector('.difficulty-tab.active').dataset.difficulty;
                    filterByCategory(category, activeDifficulty);
                });
            });
        }

        function filterExamples() {
            // Implement filtering logic
            console.log('Filtering examples...');
        }

        function filterByCategory(category, difficulty) {
            loadExamples(difficulty);
            // Filter to show only the selected category
            document.querySelectorAll('.category-section').forEach(section => {
                const sectionTitle = section.querySelector('.category-header').textContent.toLowerCase();
                if (sectionTitle.includes(category)) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        }

        function updateStats() {
            const stats = {
                total: 0,
                beginner: 0,
                intermediate: 0,
                advanced: 0
            };

            for (const difficulty in examplesData) {
                for (const category in examplesData[difficulty]) {
                    stats[difficulty] += examplesData[difficulty][category].length;
                    stats.total += examplesData[difficulty][category].length;
                }
            }

            document.getElementById('total-examples').textContent = stats.total;
            document.getElementById('beginner-examples').textContent = stats.beginner;
            document.getElementById('intermediate-examples').textContent = stats.intermediate;
            document.getElementById('advanced-examples').textContent = stats.advanced;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('example-modal')) {
                closeModal(e.target.querySelector('.modal-close'));
            }
        });
    </script>

    <style>
        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-title {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .page-description {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .difficulty-selector {
            margin-bottom: 3rem;
        }

        .difficulty-selector h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--text-primary);
        }

        .difficulty-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .difficulty-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--card-background);
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .difficulty-tab:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .difficulty-tab.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }

        .difficulty-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .difficulty-tab small {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .category-card {
            background: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .category-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .category-title {
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .category-description {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .category-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        .category-stats .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
        }

        .category-section {
            margin-bottom: 4rem;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .example-count {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: normal;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .example-card {
            background: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .example-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .example-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .example-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
            flex: 1;
        }

        .example-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-left: 1rem;
        }

        .tag {
            background: var(--primary-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .example-description {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 1.5rem;
        }

        .example-actions {
            display: flex;
            gap: 1rem;
        }

        .example-filters {
            background: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 3rem;
        }

        .filter-controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-select, .filter-input {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--input-background);
            color: var(--text-primary);
            min-width: 150px;
        }

        .filter-input {
            flex: 1;
            min-width: 200px;
        }

        .example-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .example-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .example-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--card-background);
            border-radius: 12px;
            max-width: 90%;
            max-height: 90%;
            width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .example-modal.show .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h2 {
            margin: 0;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 2rem;
        }

        .example-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .difficulty-badge, .category-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .difficulty-badge.beginner {
            background: #28a745;
            color: white;
        }

        .difficulty-badge.intermediate {
            background: #ffc107;
            color: #212529;
        }

        .difficulty-badge.advanced {
            background: #dc3545;
            color: white;
        }

        .category-badge {
            background: var(--primary-color);
            color: white;
        }

        .example-description-full {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .code-section, .explanation-section, .output-section {
            margin-bottom: 2rem;
        }

        .code-section h3, .explanation-section h3, .output-section h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            z-index: 2000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        @media (max-width: 768px) {
            .difficulty-tabs {
                flex-direction: column;
            }
            
            .category-grid {
                grid-template-columns: 1fr;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
            }
            
            .example-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .filter-controls {
                flex-direction: column;
            }
            
            .filter-select, .filter-input {
                width: 100%;
            }
        }
    </style>
</body>
</html>