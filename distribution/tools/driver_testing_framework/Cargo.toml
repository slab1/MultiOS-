[package]
name = "driver_testing_framework"
version = "0.1.0"
edition = "2021"
authors = ["MultiOS Team"]
description = "Comprehensive driver testing, validation, and debugging framework"

[dependencies]
# Core dependencies
spin = "0.9"
log = "0.4"
env_logger = "0.10"
once_cell = "1.19"
bitflags = "2.4"

# Async/tasking
tokio = { version = "1.34", features = ["full"], optional = true }
async-trait = { version = "0.1", optional = true }

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
bincode = "1.3"

# Time and performance
chrono = { version = "0.4", features = ["serde"] }
time = { version = "0.3", features = ["serde"] }
criterion = { version = "0.5", optional = true }

# Memory and collections
hashbrown = "0.14"
arrayvec = "0.7"

# Testing utilities
proptest = { version = "1.4", optional = true }
mockall = { version = "0.11", optional = true }
fixed-macro = { version = "0.3", optional = true }

# Platform-specific dependencies
[target.'cfg(target_arch = "x86_64")'.dependencies]
x86_64 = "0.14"

[target.'cfg(target_arch = "aarch64")'.dependencies]
aarch64 = { version = "0.1", optional = true }

[dev-dependencies]
tempfile = "3.8"
mockall = "0.11"
proptest = "1.4"
criterion = "0.5"

[features]
default = ["std", "simulation", "performance", "debugging", "device-drivers-bridge"]
std = []
simulation = []
performance = []
debugging = []
async_runtime = ["tokio", "async-trait"]
stress_testing = ["performance"]
hardware_simulation = ["simulation"]
device-drivers-bridge = ["std"]

[[bench]]
name = "driver_performance_benchmarks"
harness = false

[[example]]
name = "basic_driver_test"
path = "examples/basic_driver_test.rs"

[[example]]
name = "simulation_example"
path = "examples/simulation_example.rs"

[[example]]
name = "stress_testing_example"
path = "examples/stress_testing_example.rs"

[[example]]
name = "integration_bridge_example"
path = "examples/integration_bridge_example.rs"
required-features = ["device-drivers-bridge", "std"]

[[example]]
name = "complete_integration_example"
path = "examples/complete_integration_example.rs"
required-features = ["device-drivers-bridge", "std"]

[package.metadata.docs.rs]
all-features = true